# 02 - 首页模块

> 状态：✅ 已完成  
> 优先级：P0（核心功能）

---

## 2.1 首页 (Index)

### 页面信息
- **页面路径**：`pages/index/index`
- **页面类型**：TabBar页面
- **刷新方式**：下拉刷新

### 页面布局

```
┌─────────────────────────────────────┐
│  智习灵枢        📍 XX大学    🔔    │
├─────────────────────────────────────┤
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 📢 最新公告                 > │    │
│  │ ─────────────────────────── │    │
│  │ 🔴 图书馆三楼今日闭馆通知    │    │
│  │ 🟡 期末考试期间开放时间调整  │    │
│  │ 🟢 新增自习室开放通知        │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─ 快捷入口 ─────────────────┐    │
│  │  📅      🏢      📊      🤖  │    │
│  │ 快速预约  自习室  学习统计 AI助手│    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─ 预约记录 ─────────────────┐    │
│  │                             │    │
│  │  ┌─────────────────────┐   │    │
│  │  │ 📍 图书馆 2F 201    │   │    │
│  │  │ 12-04 14:00-18:00   │   │    │
│  │  │ 状态：待签到 🔵     │   │    │
│  │  └─────────────────────┘   │    │
│  │  ┌─────────────────────┐   │    │
│  │  │ 📍 图书馆 3F 301    │   │    │
│  │  │ 12-03 09:00-12:00   │   │    │
│  │  │ 状态：已完成 ✅     │   │    │
│  │  └─────────────────────┘   │    │
│  │                             │    │
│  │        查看全部记录 >       │    │
│  └─────────────────────────────┘    │
│                                     │
├─────────┬─────────┬─────────┬───────┤
│  首页   │  预约   │  扫码   │  我的 │
└─────────┴─────────┴─────────┴───────┘
```

### 页面元素详解

#### 2.1.1 顶部导航栏

| 元素 | 说明 | 交互 |
|------|------|------|
| 应用名称 | "智习灵枢" | 无 |
| 定位信息 | 当前学校/位置 | 无 |
| 消息图标 | 未读消息提示 | 点击进入消息中心，有未读时显示红点 |

#### 2.1.3 公告列表区域

```
┌─────────────────────────────────────┐
│ 📢 最新公告                    查看全部 > │
├─────────────────────────────────────┤
│ ┌─────────────────────────────────┐ │
│ │ 🔴 紧急 │ 图书馆三楼今日闭馆...  │ │
│ │         │ 12-04 10:30          │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 🟡 重要 │ 期末考试期间开放时间... │ │
│ │         │ 12-03 15:00          │ │
│ └─────────────────────────────────┘ │
│ ┌─────────────────────────────────┐ │
│ │ 🟢 普通 │ 新增自习室开放通知...  │ │
│ │         │ 12-02 09:00          │ │
│ └─────────────────────────────────┘ │
└─────────────────────────────────────┘
```

**公告等级标识**：
| 等级 | 颜色 | 说明 |
|------|------|------|
| 紧急 | 🔴 红色 | 需要立即关注 |
| 重要 | 🟡 橙色 | 重要通知 |
| 普通 | 🟢 绿色 | 一般通知 |

**交互说明**：
- 点击"查看全部"进入公告列表页
- 点击单条公告进入公告详情页
- 最多显示3条，超出显示"查看全部"

#### 2.1.4 快捷入口区域

| 入口 | 图标 | 跳转页面 | 说明 |
|------|------|----------|------|
| 快速预约 | 📅 | 预约页 | 直接进入预约流程 |
| 自习室 | 🏢 | 教学楼列表 | 浏览所有自习室 |
| 学习统计 | 📊 | 学习统计页 | 查看学习数据 |
| AI助手 | 🤖 | AI助手页 | 智能对话预约 |

#### 2.1.5 预约记录卡片

**显示规则**：
- 按时间从新到旧排序
- 首页最多显示最近2条记录
- 点击"查看全部记录"进入完整预约列表

**状态1：无预约记录**
```
┌─────────────────────────────────────┐
│  预约记录                           │
├─────────────────────────────────────┤
│                                     │
│         📅                          │
│       暂无预约记录                   │
│                                     │
│  ┌─────────────────────────────┐    │
│  │       立即预约座位           │    │
│  └─────────────────────────────┘    │
└─────────────────────────────────────┘
```

**状态2：有预约记录**
```
┌─────────────────────────────────────┐
│  预约记录                  查看全部 > │
├─────────────────────────────────────┤
│  ┌─────────────────────────────┐    │
│  │  📍 图书馆 2F 自习室201     │    │
│  │  🪑 17号座位                │    │
│  │  📅 12-04 14:00-18:00       │    │
│  │  状态：待签到 🔵            │    │
│  └─────────────────────────────┘    │
│  ┌─────────────────────────────┐    │
│  │  📍 图书馆 3F 自习室301     │    │
│  │  🪑 08号座位                │    │
│  │  📅 12-03 09:00-12:00       │    │
│  │  状态：已完成 ✅            │    │
│  └─────────────────────────────┘    │
└─────────────────────────────────────┘
```

**预约记录卡片元素**：
| 元素 | 说明 |
|------|------|
| 位置信息 | 教学楼 + 楼层 + 教室名 |
| 座位信息 | 座位号 |
| 时间信息 | 日期 + 时段 |
| 状态标识 | 当前预约状态 |

**预约状态说明**：
| 状态 | 图标 | 颜色 | 说明 |
|------|------|------|------|
| 待签到 | 🔵 | 蓝色 | 预约已生效，等待签到 |
| 使用中 | 🟢 | 绿色 | 已签到，正在使用 |
| 临时离开 | 🟡 | 橙色 | 暂时离开座位 |
| 已完成 | ✅ | 灰色 | 正常完成 |
| 已取消 | ⚪ | 灰色 | 用户取消 |
| 已违约 | 🔴 | 红色 | 超时未签到 |

**交互说明**：
- 点击预约记录卡片 → 进入预约详情页
- 点击"查看全部" → 进入我的预约列表页

---

## 2.2 公告列表页 (Announcement List)

### 页面信息
- **页面路径**：`pages/announcement/list`
- **页面类型**：列表页
- **加载方式**：上拉加载更多

### 页面布局

```
┌─────────────────────────────────────┐
│  ←         公告列表                 │
├─────────────────────────────────────┤
│  ┌─────────────────────────────┐    │
│  │ 全部 │ 紧急 │ 重要 │ 普通   │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 🔴 图书馆三楼今日闭馆通知    │    │
│  │ 因设备维护，图书馆三楼今日... │    │
│  │ 📅 2024-12-04  👁 128       │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 🟡 期末考试期间开放时间调整  │    │
│  │ 期末考试期间，自习室开放时... │    │
│  │ 📅 2024-12-03  👁 256       │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 🟢 新增自习室开放通知        │    │
│  │ 教学楼B座5楼新增自习室已... │    │
│  │ 📅 2024-12-02  👁 89        │    │
│  └─────────────────────────────┘    │
│                                     │
│         ─ 加载更多 ─                │
└─────────────────────────────────────┘
```

### 筛选Tab

| Tab | 筛选条件 |
|-----|----------|
| 全部 | 显示所有公告 |
| 紧急 | level = 1 |
| 重要 | level = 2 |
| 普通 | level = 3 |

---

## 2.3 公告详情页 (Announcement Detail)

### 页面信息
- **页面路径**：`pages/announcement/detail`
- **页面参数**：`id` - 公告ID

### 页面布局

```
┌─────────────────────────────────────┐
│  ←         公告详情                 │
├─────────────────────────────────────┤
│                                     │
│  图书馆三楼今日闭馆通知              │
│                                     │
│  🔴 紧急  │  📅 2024-12-04 10:30   │
│  👁 128次浏览                       │
│                                     │
│  ─────────────────────────────      │
│                                     │
│  尊敬的同学们：                      │
│                                     │
│  因图书馆三楼空调设备需要进行        │
│  紧急维修，今日（12月4日）三楼       │
│  自习区域暂停开放。                  │
│                                     │
│  预计恢复时间：12月5日 08:00        │
│                                     │
│  给您带来不便，敬请谅解！            │
│                                     │
│                    图书馆管理处      │
│                    2024年12月4日    │
│                                     │
│  ─────────────────────────────      │
│                                     │
│  📎 附件                            │
│  ┌─────────────────────────────┐    │
│  │ 📄 维修通知.pdf        下载  │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

### 页面元素

| 元素 | 说明 |
|------|------|
| 标题 | 公告标题，36rpx加粗 |
| 等级标签 | 紧急/重要/普通 |
| 发布时间 | 公告发布时间 |
| 浏览次数 | 公告浏览量 |
| 正文内容 | 富文本内容，支持图片 |
| 附件列表 | 可下载的附件 |

---

## 2.4 接口依赖

| 接口名称 | 请求方式 | 接口路径 | 说明 |
|----------|----------|----------|------|
| 首页配置 | GET | `/commonConfig/wc/index/config` | 获取轮播图等配置 |
| 公告列表 | GET | `/announcement/page` | 分页获取公告 |
| 公告详情 | GET | `/announcement/basicInfo/{id}` | 获取公告详情 |
| 公告附件 | GET | `/announcement/fileInfo/{id}` | 获取公告附件 |

---

> 上一篇：[01-启动与登录模块](./01-启动与登录模块.md)  
> 下一篇：[03-自习室浏览模块](./03-自习室浏览模块.md)
