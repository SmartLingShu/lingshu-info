# 01 - 启动与登录模块

> 状态：📋 规划中  
> 优先级：P0（核心功能）

---

## 1.1 启动页 (Splash)

### 页面信息
- **页面路径**：`pages/splash/index`
- **页面类型**：过渡页面
- **停留时间**：2-3秒自动跳转

### 页面布局

```
┌─────────────────────────────────────┐
│                                     │
│                                     │
│                                     │
│            ┌─────────┐              │
│            │  LOGO   │              │
│            │  图标   │              │
│            └─────────┘              │
│                                     │
│          智习灵枢                    │
│     Smart Study Reservoir           │
│                                     │
│                                     │
│                                     │
│          ○ ○ ○ (加载动画)           │
│                                     │
│                                     │
│         版本号 v1.0.0               │
└─────────────────────────────────────┘
```

### 页面元素

| 元素 | 说明 | 样式 |
|------|------|------|
| Logo图标 | 应用图标，尺寸200rpx×200rpx | 居中显示 |
| 应用名称 | "智习灵枢" | 36rpx，主色调，加粗 |
| 英文名称 | "Smart Study Reservoir" | 24rpx，灰色 |
| 加载动画 | 三个圆点循环动画 | 主色调 |
| 版本号 | 当前版本信息 | 20rpx，灰色，底部 |

### 交互逻辑

1. **首次启动**：显示启动页 → 检查登录状态 → 未登录跳转登录页
2. **已登录**：显示启动页 → 检查Token有效性 → 有效则跳转首页
3. **Token过期**：显示启动页 → 检测Token过期 → 跳转登录页

---

## 1.2 登录授权页 (Login)

### 页面信息
- **页面路径**：`pages/login/index`
- **页面类型**：功能页面
- **返回行为**：退出小程序

### 页面布局

```
┌─────────────────────────────────────┐
│                                     │
│            ┌─────────┐              │
│            │  LOGO   │              │
│            └─────────┘              │
│                                     │
│          欢迎使用智习灵枢            │
│      开启你的高效学习之旅            │
│                                     │
│                                     │
│  ┌─────────────────────────────┐    │
│  │      📱 微信一键登录         │    │
│  └─────────────────────────────┘    │
│                                     │
│                                     │
│  ┌─────────────────────────────┐    │
│  │      🔑 账号密码登录         │    │
│  └─────────────────────────────┘    │
│                                     │
│                                     │
│                                     │
│    ☐ 我已阅读并同意《用户协议》      │
│       和《隐私政策》                 │
│                                     │
└─────────────────────────────────────┘
```

### 页面元素

| 元素 | 说明 | 样式 |
|------|------|------|
| Logo | 应用图标 | 150rpx×150rpx，居中 |
| 欢迎语 | 主标题 | 36rpx，黑色，加粗 |
| 副标题 | 引导文案 | 28rpx，灰色 |
| 微信登录按钮 | 主要登录方式 | 主色调背景，白色文字，圆角16rpx |
| 账号登录按钮 | 备用登录方式 | 白色背景，主色调边框和文字 |
| 协议勾选框 | 必须勾选才能登录 | 复选框+文字链接 |

### 交互说明

#### 微信一键登录
1. 点击按钮 → 检查协议勾选状态
2. 未勾选 → Toast提示"请先同意用户协议"
3. 已勾选 → 调用微信授权 → 获取用户信息
4. 授权成功 → 调用后端登录接口 → 保存Token → 跳转首页
5. 授权失败 → Toast提示"授权失败，请重试"

#### 账号密码登录
1. 点击按钮 → 弹出登录表单弹窗
2. 输入账号密码 → 点击登录
3. 验证成功 → 保存Token → 跳转首页
4. 验证失败 → 显示错误信息

### 账号登录弹窗

```
┌─────────────────────────────────────┐
│              账号登录          ✕    │
├─────────────────────────────────────┤
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 👤  请输入账号/学号          │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 🔒  请输入密码              │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │           登 录              │    │
│  └─────────────────────────────┘    │
│                                     │
│         忘记密码？点击找回          │
│                                     │
└─────────────────────────────────────┘
```

### 表单验证规则

| 字段 | 规则 | 错误提示 |
|------|------|----------|
| 账号 | 必填，4-20位字符 | "请输入正确的账号" |
| 密码 | 必填，6-20位字符 | "密码长度为6-20位" |

---

## 1.3 用户协议页 (Agreement)

### 页面信息
- **页面路径**：`pages/agreement/index`
- **页面类型**：内容展示页
- **参数**：`type=user` 或 `type=privacy`

### 页面布局

```
┌─────────────────────────────────────┐
│  ←    用户服务协议                  │
├─────────────────────────────────────┤
│                                     │
│  用户服务协议                       │
│                                     │
│  更新日期：2024年12月1日            │
│                                     │
│  ─────────────────────────────      │
│                                     │
│  一、服务条款                       │
│                                     │
│  1.1 本协议是您与智习灵枢平台       │
│  之间关于使用本平台服务所订立       │
│  的协议...                          │
│                                     │
│  1.2 ...                            │
│                                     │
│  二、用户注册                       │
│                                     │
│  2.1 ...                            │
│                                     │
│  （协议内容滚动区域）               │
│                                     │
└─────────────────────────────────────┘
```

### 页面元素

| 元素 | 说明 | 样式 |
|------|------|------|
| 导航栏 | 返回按钮+标题 | 标准导航栏 |
| 协议标题 | 协议名称 | 36rpx，加粗 |
| 更新日期 | 协议更新时间 | 24rpx，灰色 |
| 协议内容 | 富文本内容 | 28rpx，行高1.8 |

---

## 1.4 异常状态处理

### 网络异常

```
┌─────────────────────────────────────┐
│                                     │
│                                     │
│            ┌─────────┐              │
│            │  📡    │              │
│            │ 断网图标│              │
│            └─────────┘              │
│                                     │
│          网络连接失败                │
│      请检查网络设置后重试            │
│                                     │
│  ┌─────────────────────────────┐    │
│  │         重新连接             │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

### 服务器异常

```
┌─────────────────────────────────────┐
│                                     │
│            ┌─────────┐              │
│            │  🔧    │              │
│            │ 维护图标│              │
│            └─────────┘              │
│                                     │
│          服务器维护中                │
│       预计恢复时间：10:00           │
│                                     │
│  ┌─────────────────────────────┐    │
│  │         稍后再试             │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

---

## 1.5 接口依赖

| 接口名称 | 请求方式 | 接口路径 | 说明 |
|----------|----------|----------|------|
| 微信登录 | POST | `/api/v1/auth/wechat-login` | 微信授权码换取Token |
| 账号登录 | POST | `/api/v1/auth/login` | 账号密码登录 |
| 刷新Token | POST | `/api/v1/auth/refresh-token` | Token续期 |

---

> 上一篇：[00-目录与概述](./00-目录与概述.md)  
> 下一篇：[02-首页模块](./02-首页模块.md)
