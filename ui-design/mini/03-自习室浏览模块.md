# 03 - 自习室浏览模块

> 状态：📋 规划中  
> 优先级：P0（核心功能）

---

## 3.1 教学楼列表页 (Building List)

### 页面信息
- **页面路径**：`pages/building/list`
- **页面类型**：列表页
- **入口**：首页快捷入口、预约Tab

### 页面布局

```text
┌─────────────────────────────────────┐
│  ←         选择教学楼               │
├─────────────────────────────────────┤
│  ┌─────────────────────────────┐    │
│  │ 🔍 搜索教学楼/自习室         │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 图书馆                       │    │
│  │ 🪑 可用座位: 128/200         │    │
│  │ ⏰ 周一至周日 07:00-22:00    │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 教学楼A                      │    │
│  │ 🪑 可用座位: 56/120          │    │
│  │ ⏰ 周一至周五 08:00-21:00    │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 教学楼B                      │    │
│  │ 🪑 可用座位: 89/150          │    │
│  │ ⏰ 周一、周三、周五 08:00-21:00│   │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 教学楼C                      │    │
│  │ 🪑 可用座位: 45/100          │    │
│  │ ⏰ 多时段开放 >              │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

### 页面元素

| 元素 | 说明 | 交互 |
|------|------|------|
| 搜索框 | 支持搜索教学楼/教室名称 | 输入关键词实时筛选 |
| 排序切换 | 按距离/按热度 | 点击切换排序方式 |
| 教学楼卡片 | 展示教学楼信息 | 点击进入楼层列表 |

### 教学楼卡片信息

| 字段 | 说明 | 数据来源 |
|------|------|----------|
| 名称 | 教学楼名称 | `name` |
| 可用座位 | 当前可用/总座位数 | 实时统计 |
| 开放时间 | 教学楼开放时间（含星期） | `openSchedule` |

### 开放时间显示规则

开放时间支持多种配置方式，根据实际配置智能显示：

| 配置场景 | 显示格式 | 示例 |
|----------|----------|------|
| 全周统一时间 | 周一至周日 HH:mm-HH:mm | ⏰ 周一至周日 07:00-22:00 |
| 工作日统一时间 | 周一至周五 HH:mm-HH:mm | ⏰ 周一至周五 08:00-21:00 |
| 周末统一时间 | 周六至周日 HH:mm-HH:mm | ⏰ 周六至周日 09:00-18:00 |
| 连续多天统一时间 | 周X至周X HH:mm-HH:mm | ⏰ 周一至周六 08:00-22:00 |
| 间隔多天统一时间 | 周X、周X、周X HH:mm-HH:mm | ⏰ 周一、周三、周五 08:00-21:00 |
| 单天开放 | 周X HH:mm-HH:mm | ⏰ 周六 09:00-17:00 |
| 不同天不同时间 | 分行显示或点击查看详情 | ⏰ 多时段开放 > |

**不同天不同时间的详情展示：**

```text
┌─────────────────────────────────────┐
│  开放时间详情                   ✕   │
├─────────────────────────────────────┤
│                                     │
│  周一  08:00 - 21:00               │
│  周二  08:00 - 21:00               │
│  周三  08:00 - 22:00               │
│  周四  08:00 - 21:00               │
│  周五  08:00 - 22:00               │
│  周六  09:00 - 18:00               │
│  周日  休息                         │
│                                     │
└─────────────────────────────────────┘
```

**开放时间数据结构：**

```json
{
  "openSchedule": [
    { "day": 1, "dayName": "周一", "open": true, "openTime": "08:00", "closeTime": "21:00" },
    { "day": 2, "dayName": "周二", "open": true, "openTime": "08:00", "closeTime": "21:00" },
    { "day": 3, "dayName": "周三", "open": true, "openTime": "08:00", "closeTime": "22:00" },
    { "day": 4, "dayName": "周四", "open": true, "openTime": "08:00", "closeTime": "21:00" },
    { "day": 5, "dayName": "周五", "open": true, "openTime": "08:00", "closeTime": "22:00" },
    { "day": 6, "dayName": "周六", "open": true, "openTime": "09:00", "closeTime": "18:00" },
    { "day": 7, "dayName": "周日", "open": false, "openTime": null, "closeTime": null }
  ]
}
```

---

## 3.2 楼层选择页 (Floor List)

### 页面信息
- **页面路径**：`pages/floor/list`
- **页面参数**：`buildingId` - 教学楼ID

### 页面布局

```text
┌─────────────────────────────────────┐
│  ←         图书馆                   │
├─────────────────────────────────────┤
│                                     │
│  ┌─────────────────────────────┐    │
│  │         教学楼图片           │    │
│  │                             │    │
│  └─────────────────────────────┘    │
│                                     │
│  📍 校园中心                        │
│  ⏰ 开放时间：周一至周日 07:00-22:00 │
│  📞 联系电话：0571-12345678         │
│                                     │
│  ─────────── 选择楼层 ───────────   │
│                                     │
│  ┌─────────────────────────────┐    │
│  │  1F │ 综合阅览区             │    │
│  │     │ 🪑 32/50               │    │
│  │     │ ⏰ 周一至周日 07:00-22:00│   │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │  2F │ 自习区A                │    │
│  │     │ 🪑 45/80               │    │
│  │     │ ⏰ 周一至周日 07:00-22:00│   │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │  3F │ 自习区B                │    │
│  │     │ 🪑 28/60               │    │
│  │     │ ⏰ 周一至周五 08:00-21:00│   │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │  4F │ 研讨室                 │    │
│  │     │ 🪑 12/20               │    │
│  │     │ ⏰ 多时段开放 >        │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

### 楼层卡片信息

| 字段 | 说明 |
|------|------|
| 楼层号 | 1F、2F等 |
| 楼层名称 | 楼层功能描述 |
| 可用座位 | 当前可用/总座位数 |
| 开放时间 | 该楼层开放时间，显示规则同教学楼 |

> 注：楼层开放时间可继承教学楼配置，也可单独配置。若不同天时间不同，显示"多时段开放 >"，点击可查看详情。

### 交互说明
- 点击楼层卡片 → 进入该楼层的教室列表

---

## 3.3 教室列表页 (Classroom List)

### 页面信息
- **页面路径**：`pages/classroom/list`
- **页面参数**：`floorId` - 楼层ID

### 页面布局

```text
┌─────────────────────────────────────┐
│  ←      图书馆 · 2F                 │
├─────────────────────────────────────┤
│  ┌─────────────────────────────┐    │
│  │ 🔍 搜索教室                  │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─ 筛选条件 ─────────────────┐    │
│  │ 全部 │ 有空位 │ 有电源 │ 安静区 │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ ┌─────┐                     │    │
│  │ │ 📷  │  自习室201          │    │
│  │ │ 图片 │  🪑 18/30          │    │
│  │ └─────┘  ⏰ 周一至周日 07:00-22:00│
│  │          🔌 有电源  🔇 安静区 │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ ┌─────┐                     │    │
│  │ │ 📷  │  自习室202          │    │
│  │ │ 图片 │  🪑 25/40          │    │
│  │ └─────┘  ⏰ 周一、周三、周五 08:00-21:00│
│  │          🔌 有电源           │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ ┌─────┐                     │    │
│  │ │ 📷  │  研讨室203          │    │
│  │ │ 图片 │  🪑 0/8 (已满)     │    │
│  │ └─────┘  ⏰ 多时段开放 >    │    │
│  │          🎤 可讨论           │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

### 筛选条件

| 筛选项 | 说明 |
|--------|------|
| 全部 | 显示所有教室 |
| 有空位 | 只显示有空余座位的教室 |
| 有电源 | 只显示配备电源插座的教室 |
| 安静区 | 只显示安静学习区域 |

### 教室卡片信息

| 字段 | 说明 | 样式 |
|------|------|------|
| 教室图片 | 教室环境图 | 120rpx×120rpx |
| 教室名称 | 教室名称 | 32rpx加粗 |
| 座位情况 | 可用/总数 | 满座时显示红色 |
| 开放时间 | 教室开放时间，显示规则同教学楼 | 24rpx灰色 |
| 功能标签 | 电源/安静/可讨论等 | 标签样式 |

> 注：教室开放时间可继承楼层配置，也可单独配置。若不同天时间不同，显示"多时段开放 >"，点击可查看详情。

### 功能标签说明

| 标签 | 图标 | 说明 |
|------|------|------|
| 有电源 | 🔌 | 座位配备电源插座 |
| 安静区 | 🔇 | 需保持安静 |
| 可讨论 | 🎤 | 允许小声讨论 |
| 空调 | ❄️ | 配备空调 |
| WiFi | 📶 | 有WiFi覆盖 |

---

## 3.4 教室详情页 (Classroom Detail)

### 页面信息
- **页面路径**：`pages/classroom/detail`
- **页面参数**：`classroomId` - 教室ID

### 页面布局

```text
┌─────────────────────────────────────┐
│  ←      自习室201                   │
├─────────────────────────────────────┤
│  ┌─────────────────────────────┐    │
│  │                             │    │
│  │      教室环境图片轮播        │    │
│  │                             │    │
│  └─────────────────────────────┘    │
│         ○ ● ○ (指示器)             │
│                                     │
│  ┌─ 基本信息 ─────────────────┐    │
│  │ 📍 位置：图书馆 2F 东侧      │    │
│  │ 🪑 座位：30个 (当前可用18个) │    │
│  │ ⏰ 开放：周一至周日 07:00-22:00│   │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─ 设施服务 ─────────────────┐    │
│  │  🔌      ❄️      📶      🔇  │    │
│  │ 电源插座  空调   WiFi   安静区 │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─ 教室简介 ─────────────────┐    │
│  │ 本自习室位于图书馆二楼东侧， │    │
│  │ 环境安静，采光良好，配备独立 │    │
│  │ 空调和电源插座，适合长时间   │    │
│  │ 自习使用。                   │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─ 预约须知 ─────────────────┐    │
│  │ • 请提前15分钟内签到         │    │
│  │ • 超时未签到将自动取消预约   │    │
│  │ • 请保持安静，勿大声喧哗     │    │
│  │ • 离开时请带走个人物品       │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │         选择座位预约          │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

**多时段开放时间的详情页展示：**

当教室配置了不同天不同时间时，基本信息区域显示如下：

```text
┌─ 基本信息 ─────────────────┐
│ 📍 位置：图书馆 4F 西侧      │
│ 🪑 座位：20个 (当前可用12个) │
│ ⏰ 开放时间：               │
│    周一  08:00-21:00       │
│    周二  08:00-21:00       │
│    周三  08:00-22:00       │
│    周四  08:00-21:00       │
│    周五  08:00-22:00       │
│    周六  09:00-18:00       │
│    周日  休息               │
└─────────────────────────────┘
```

### 页面元素

| 区域 | 内容 |
|------|------|
| 图片轮播 | 教室环境图片，支持左右滑动 |
| 基本信息 | 位置、座位数、开放时间、管理员 |
| 设施服务 | 教室配备的设施图标展示 |
| 教室简介 | 教室介绍文字 |
| 预约须知 | 预约规则说明 |
| 底部按钮 | 进入座位选择页面 |

---

## 3.5 接口依赖

| 接口名称 | 请求方式 | 接口路径 | 说明 |
|----------|----------|----------|------|
| 教学楼列表 | GET | `/schoolbuilding/listAll` | 获取所有教学楼 |
| 教学楼详情 | GET | `/schoolbuilding/detail` | 获取教学楼详情 |
| 楼层列表 | GET | `/floor/listAll` | 获取楼层列表 |
| 教室列表 | GET | `/classroom/page` | 分页获取教室 |
| 教室详情 | GET | `/classroom/baseInfo/{id}` | 获取教室基本信息 |
| 教室功能 | GET | `/classroom/functionInfo/{id}` | 获取教室功能配置 |
| 教室图片 | GET | `/classroom/showInfo/{id}` | 获取教室图片 |

---

> 上一篇：[02-首页模块](./02-首页模块.md)  
> 下一篇：[04-座位预约模块](./04-座位预约模块.md)
