# 05 - 公告管理模块

> 状态：📋 规划中  
> 优先级：P1（重要功能）

---

## 5.1 公告列表 (Announcement)

### 页面信息

- **页面路径**：`/study/announcement`
- **页面类型**：列表页
- **访问权限**：公告管理权限

### 页面布局

```text
┌────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│  公告管理 / 公告列表                                                                                                │
├────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                    │
│  ┌─ 搜索条件 ────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │ 公告标题：┌────────────────────┐  公告等级：┌────────────────┐  状态：┌────────────────┐                      │ │
│  │          │                    │           │ 全部        ▼ │       │ 全部        ▼ │                      │ │
│  │          └────────────────────┘           └────────────────┘       └────────────────┘                      │ │
│  │                                                                                                            │ │
│  │ 发布日期：┌──────────────────────────────────┐                          [搜索]  [重置]      [+ 新增]       │ │
│  │          │                                  │                                                              │ │
│  │          └──────────────────────────────────┘                                                              │ │
│  └────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                                                    │
│  ┌─ 数据列表 ────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │ 公告标题                       │ 等级     │ 浏览量   │ 发布时间              │ 状态     │ 操作                │ │
│  │────────────────────────────────┼──────────┼──────────┼───────────────────────┼──────────┼─────────────────────│ │
│  │ 图书馆三楼今日闭馆通知         │ 🔴紧急   │ 128      │ 2024-12-04 10:30:00   │ 🟢已发布 │ 编辑  删除  置顶    │ │
│  │────────────────────────────────┼──────────┼──────────┼───────────────────────┼──────────┼─────────────────────│ │
│  │ 期末考试期间开放时间调整       │ 🟡重要   │ 256      │ 2024-12-03 15:00:00   │ 🟢已发布 │ 编辑  删除  置顶    │ │
│  │────────────────────────────────┼──────────┼──────────┼───────────────────────┼──────────┼─────────────────────│ │
│  │ 新增自习室开放通知             │ 🟢普通   │ 89       │ 2024-12-02 09:00:00   │ 🟢已发布 │ 编辑  删除  下架    │ │
│  │────────────────────────────────┼──────────┼──────────┼───────────────────────┼──────────┼─────────────────────│ │
│  │ 元旦假期安排                   │ 🟡重要   │ 0        │ -                     │ ⚪草稿   │ 编辑  删除  发布    │ │
│  │────────────────────────────────┼──────────┼──────────┼───────────────────────┼──────────┼─────────────────────│ │
│  │ 国庆节开放时间                 │ 🟢普通   │ 352      │ 2024-10-01 08:00:00   │ ⚫已下架 │ 编辑  删除  发布    │ │
│  └────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                                                    │
│                                                                          共 45 条记录    < 1/3 >    每页 20 条     │
│                                                                                                                    │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```


### 公告等级

| 等级 | 颜色 | 说明 |
| ---- | ---- | ---- |
| 紧急 | 🔴 红色 | 需要立即关注的重要通知 |
| 重要 | 🟡 橙色 | 重要通知 |
| 普通 | 🟢 绿色 | 一般通知 |

### 公告状态

| 状态 | 说明 |
| ---- | ---- |
| 草稿 | 未发布，可编辑 |
| 已发布 | 已发布，小程序可见 |
| 已下架 | 已下架，小程序不可见 |

---

## 5.2 新增/编辑公告

### 页面信息

- **页面路径**：`/study/announcement/create` 或 `/study/announcement/edit/:id`
- **页面类型**：表单页

### 页面布局

```text
┌────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│  公告管理 / 新增公告                                                                                                │
├────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                    │
│  ┌─ 基本信息 ────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                                                                                               │ │
│  │  * 公告标题：                                                                                                 │ │
│  │    ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────┐│ │
│  │    │                                                                                                          ││ │
│  │    └──────────────────────────────────────────────────────────────────────────────────────────────────────────┘│ │
│  │                                                                                                               │ │
│  │  * 公告等级：○ 🔴 紧急  ○ 🟡 重要  ○ 🟢 普通                                                                  │ │
│  │                                                                                                               │ │
│  │  * 公告内容：                                                                                                 │ │
│  │    ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────┐│ │
│  │    │ 富文本编辑器                                                                                             ││ │
│  │    │                                                                                                          ││ │
│  │    │ B I U  字号  颜色  对齐  列表  链接  图片                                                                 ││ │
│  │    │──────────────────────────────────────────────────────────────────────────────────────────────────────────││ │
│  │    │                                                                                                          ││ │
│  │    │                                                                                                          ││ │
│  │    │                                                                                                          ││ │
│  │    │                                                                                                          ││ │
│  │    │                                                                                                          ││ │
│  │    └──────────────────────────────────────────────────────────────────────────────────────────────────────────┘│ │
│  │                                                                                                               │ │
│  └────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                                                    │
│  ┌─ 附件上传 ────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                                                                                               │ │
│  │    ┌─────────┐ ┌─────────────┐ ┌─────────────┐                                                               │ │
│  │    │  + 上传  │ │ 文件1.pdf   │ │ 文件2.doc   │                                                               │ │
│  │    └─────────┘ └─────────────┘ └─────────────┘                                                               │ │
│  │    支持 pdf、doc、docx、xls、xlsx 格式，单个文件最大10MB                                                       │ │
│  │                                                                                                               │ │
│  └────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                                                    │
│  ┌─ 发布设置 ────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                                                                                               │ │
│  │    发布方式：○ 立即发布  ○ 定时发布                                                                           │ │
│  │                                                                                                               │ │
│  │    定时发布时间：（选择定时发布时显示）                                                                        │ │
│  │    ┌──────────────────────────────────────────────────────────────────────────────────────────────────────────┐│ │
│  │    │ 2024-12-05 10:00                                                                                         ││ │
│  │    └──────────────────────────────────────────────────────────────────────────────────────────────────────────┘│ │
│  │                                                                                                               │ │
│  │    ☐ 置顶显示                                                                                                 │ │
│  │                                                                                                               │ │
│  └────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                                                    │
│                                                                    ┌─────────┐  ┌─────────┐  ┌─────────┐         │
│                                                                    │  取消   │  │ 保存草稿 │  │  发布   │         │
│                                                                    └─────────┘  └─────────┘  └─────────┘         │
│                                                                                                                    │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

### 表单字段

| 字段 | 类型 | 必填 | 校验规则 |
| ---- | ---- | ---- | -------- |
| 公告标题 | 输入框 | 是 | 2-100字符 |
| 公告等级 | 单选框 | 是 | 默认普通 |
| 公告内容 | 富文本 | 是 | 最少10字符 |
| 附件 | 文件上传 | 否 | 最多5个，单个最大10MB |
| 发布方式 | 单选框 | 是 | 默认立即发布 |
| 定时发布时间 | 日期时间选择器 | 条件必填 | 选择定时发布时必填 |
| 置顶显示 | 复选框 | 否 | 默认不置顶 |

---

## 5.3 公告详情

### 页面布局

```text
┌────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┐
│  公告管理 / 公告详情                                                                                                │
├────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┤
│                                                                                                                    │
│  ┌─ 公告信息 ────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                                                                                               │ │
│  │  图书馆三楼今日闭馆通知                                                                                        │ │
│  │                                                                                                               │ │
│  │  🔴 紧急  │  📅 2024-12-04 10:30  │  👁 128次浏览                                                              │ │
│  │                                                                                                               │ │
│  │  ─────────────────────────────────────────────────────────────────────────────────────────────────────────────│ │
│  │                                                                                                               │ │
│  │  尊敬的同学们：                                                                                                │ │
│  │                                                                                                               │ │
│  │  因图书馆三楼空调设备需要进行紧急维修，今日（12月4日）三楼自习区域暂停开放。                                     │ │
│  │                                                                                                               │ │
│  │  预计恢复时间：12月5日 08:00                                                                                   │ │
│  │                                                                                                               │ │
│  │  给您带来不便，敬请谅解！                                                                                      │ │
│  │                                                                                                               │ │
│  │                                                                                          图书馆管理处          │ │
│  │                                                                                          2024年12月4日         │ │
│  │                                                                                                               │ │
│  └────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                                                    │
│  ┌─ 附件列表 ────────────────────────────────────────────────────────────────────────────────────────────────────┐ │
│  │                                                                                                               │ │
│  │  📄 维修通知.pdf                                                                                      [下载]  │ │
│  │                                                                                                               │ │
│  └────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘ │
│                                                                                                                    │
│                                                                    ┌─────────┐  ┌─────────┐  ┌─────────┐         │
│                                                                    │  返回   │  │  编辑   │  │  下架   │         │
│                                                                    └─────────┘  └─────────┘  └─────────┘         │
│                                                                                                                    │
└────────────────────────────────────────────────────────────────────────────────────────────────────────────────────┘
```

---

## 5.4 接口依赖

| 接口名称 | 请求方式 | 接口路径 | 说明 |
| -------- | -------- | -------- | ---- |
| 公告列表 | GET | `/admin-api/study/announcement/page` | 分页查询公告 |
| 公告详情 | GET | `/admin-api/study/announcement/get` | 获取公告详情 |
| 新增公告 | POST | `/admin-api/study/announcement/create` | 新增公告 |
| 修改公告 | PUT | `/admin-api/study/announcement/update` | 修改公告 |
| 删除公告 | DELETE | `/admin-api/study/announcement/delete` | 删除公告 |
| 发布公告 | PUT | `/admin-api/study/announcement/publish` | 发布公告 |
| 下架公告 | PUT | `/admin-api/study/announcement/unpublish` | 下架公告 |
| 置顶公告 | PUT | `/admin-api/study/announcement/top` | 置顶公告 |
| 上传附件 | POST | `/admin-api/infra/file/upload` | 上传附件 |

---

> 上一篇：[04-用户管理模块](./04-用户管理模块.md)  
> 下一篇：[06-数据统计模块](./06-数据统计模块.md)
