# 07 - 信用积分模块

> 状态：📋 规划中  
> 优先级：P1（重要功能）

---

## 7.1 信用积分首页 (Credit Score)

### 页面信息
- **页面路径**：`pages/credit/index`
- **入口**：我的页面 → 信用积分

### 页面布局

```
┌─────────────────────────────────────┐
│  ←      信用积分                    │
├─────────────────────────────────────┤
│                                     │
│  ┌─────────────────────────────┐    │
│  │                             │    │
│  │      ┌───────────────┐      │    │
│  │      │               │      │    │
│  │      │      98       │      │    │
│  │      │     信用分     │      │    │
│  │      │               │      │    │
│  │      └───────────────┘      │    │
│  │                             │    │
│  │      信用等级：优秀 ⭐⭐⭐⭐   │    │
│  │                             │    │
│  │   ┌─────────────────────┐   │    │
│  │   │ 0    60   80   100  │   │    │
│  │   │ ████████████████░░░ │   │    │
│  │   │ 较差  一般  良好 优秀 │   │    │
│  │   └─────────────────────┘   │    │
│  │                             │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─ 信用权益 ─────────────────┐    │
│  │                             │    │
│  │  ✅ 可预约4小时             │    │
│  │  ✅ 可提前3天预约           │    │
│  │  ✅ 优先选座权              │    │
│  │                             │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─ 积分明细 ─────────────────┐    │
│  │                             │    │
│  │ 今日  按时履约        +2    │    │
│  │ 今日  提前释放座位    +1    │    │
│  │ 昨日  按时履约        +2    │    │
│  │ 12-02 迟到签到        -5    │    │
│  │                             │    │
│  │        查看全部明细    >    │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─ 积分规则 ─────────────────┐    │
│  │                             │    │
│  │  📖 了解积分规则        >   │    │
│  │                             │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

### 信用等级体系

| 等级 | 分数范围 | 星级 | 权益 |
|------|----------|------|------|
| 优秀 | 90-100 | ⭐⭐⭐⭐⭐ | 可预约4小时，提前3天预约，优先选座 |
| 良好 | 80-89 | ⭐⭐⭐⭐ | 可预约4小时，提前2天预约 |
| 一般 | 60-79 | ⭐⭐⭐ | 可预约3小时，提前1天预约 |
| 较差 | 40-59 | ⭐⭐ | 可预约2小时，仅当天预约 |
| 限制 | 0-39 | ⭐ | 限制预约，需恢复信用 |

---

## 7.2 积分明细页 (Credit Detail)

### 页面信息
- **页面路径**：`pages/credit/detail`
- **页面类型**：列表页

### 页面布局

```
┌─────────────────────────────────────┐
│  ←      积分明细                    │
├─────────────────────────────────────┤
│  ┌─────────────────────────────┐    │
│  │ 全部 │ 收入 │ 支出           │    │
│  └─────────────────────────────┘    │
│                                     │
│  ───────── 2024年12月 ─────────     │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 按时履约                    │    │
│  │ 图书馆 2F 自习室201         │    │
│  │ 12-04 18:05          +2    │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 提前释放座位                 │    │
│  │ 图书馆 2F 自习室201         │    │
│  │ 12-04 16:30          +1    │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 按时履约                    │    │
│  │ 图书馆 3F 自习室301         │    │
│  │ 12-03 21:02          +2    │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 迟到签到                    │    │
│  │ 教学楼A 5F 自习室502        │    │
│  │ 12-02 14:18          -5    │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │ 爽约扣分                    │    │
│  │ 图书馆 2F 自习室201         │    │
│  │ 11-28 --:--          -10   │    │
│  └─────────────────────────────┘    │
│                                     │
│         ─ 加载更多 ─                │
└─────────────────────────────────────┘
```

### 积分变动类型

| 类型 | 分值 | 说明 |
|------|------|------|
| 按时履约 | +2 | 正常完成预约 |
| 提前释放 | +1 | 提前30分钟以上签退 |
| 连续履约 | +3 | 连续7天按时履约额外奖励 |
| 迟到签到 | -5 | 超过签到时间但在15分钟内 |
| 爽约 | -10 | 未签到自动取消 |
| 临时取消 | -3 | 开始前1小时内取消 |
| 信用恢复 | +5 | 连续5次按时履约恢复 |

---

## 7.3 积分规则页 (Credit Rules)

### 页面信息
- **页面路径**：`pages/credit/rules`

### 页面布局

```
┌─────────────────────────────────────┐
│  ←      积分规则                    │
├─────────────────────────────────────┤
│                                     │
│  ┌─ 积分获取 ─────────────────┐    │
│  │                             │    │
│  │  📗 按时履约                │    │
│  │  正常完成预约可获得 +2 分    │    │
│  │                             │    │
│  │  📗 提前释放座位            │    │
│  │  提前30分钟以上签退 +1 分   │    │
│  │                             │    │
│  │  📗 连续履约奖励            │    │
│  │  连续7天按时履约额外 +3 分  │    │
│  │                             │    │
│  │  📗 信用恢复                │    │
│  │  连续5次按时履约可恢复 +5 分│    │
│  │                             │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─ 积分扣除 ─────────────────┐    │
│  │                             │    │
│  │  📕 迟到签到                │    │
│  │  超过签到时间15分钟内 -5 分 │    │
│  │                             │    │
│  │  📕 爽约                    │    │
│  │  未签到自动取消 -10 分      │    │
│  │                             │    │
│  │  📕 临时取消                │    │
│  │  开始前1小时内取消 -3 分    │    │
│  │                             │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─ 信用等级权益 ─────────────┐    │
│  │                             │    │
│  │  ⭐⭐⭐⭐⭐ 优秀 (90-100分)   │    │
│  │  • 可预约最长4小时          │    │
│  │  • 可提前3天预约            │    │
│  │  • 优先选座权               │    │
│  │  • VIP专属座位              │    │
│  │                             │    │
│  │  ⭐⭐⭐⭐ 良好 (80-89分)      │    │
│  │  • 可预约最长4小时          │    │
│  │  • 可提前2天预约            │    │
│  │                             │    │
│  │  ⭐⭐⭐ 一般 (60-79分)        │    │
│  │  • 可预约最长3小时          │    │
│  │  • 可提前1天预约            │    │
│  │                             │    │
│  │  ⭐⭐ 较差 (40-59分)          │    │
│  │  • 可预约最长2小时          │    │
│  │  • 仅可当天预约             │    │
│  │                             │    │
│  │  ⭐ 限制 (0-39分)            │    │
│  │  • 限制预约功能             │    │
│  │  • 需连续履约恢复信用       │    │
│  │                             │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

---

## 7.4 信用恢复引导

### 低信用提示弹窗

```
┌─────────────────────────────────────┐
│              信用提醒          ✕    │
├─────────────────────────────────────┤
│                                     │
│            ┌─────────┐              │
│            │   ⚠️   │              │
│            └─────────┘              │
│                                     │
│        您的信用分较低                │
│        当前信用分：45分              │
│                                     │
│  您的预约权限已受到限制：            │
│  • 最长预约时长：2小时               │
│  • 仅可预约当天座位                  │
│                                     │
│  如何恢复信用？                      │
│  连续5次按时履约可恢复5分            │
│                                     │
│  ┌─────────────────────────────┐    │
│  │         我知道了              │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

### 黑名单提示页

```
┌─────────────────────────────────────┐
│                                     │
│                                     │
│            ┌─────────┐              │
│            │   🚫   │              │
│            └─────────┘              │
│                                     │
│        预约功能已被限制              │
│                                     │
│  由于多次违约，您的预约功能已被      │
│  暂时限制。                         │
│                                     │
│  限制原因：连续3次爽约               │
│  限制时间：2024-12-01 至 2024-12-07 │
│                                     │
│  如有疑问，请联系管理员。            │
│                                     │
│  ┌─────────────────────────────┐    │
│  │         联系客服              │    │
│  └─────────────────────────────┘    │
│                                     │
│  ┌─────────────────────────────┐    │
│  │         返回首页              │    │
│  └─────────────────────────────┘    │
│                                     │
└─────────────────────────────────────┘
```

---

## 7.5 接口依赖

| 接口名称 | 请求方式 | 接口路径 | 说明 |
|----------|----------|----------|------|
| 信用分信息 | GET | `/api/v1/credit/info` | 获取用户信用分 |
| 积分明细 | GET | `/api/v1/credit/records` | 获取积分变动记录 |
| 信用等级 | GET | `/api/v1/credit/level` | 获取信用等级权益 |
| 黑名单状态 | GET | `/api/v1/blacklist/status` | 检查黑名单状态 |

---

> 上一篇：[06-个人中心模块](./06-个人中心模块.md)  
> 下一篇：[08-学习统计模块](./08-学习统计模块.md)
